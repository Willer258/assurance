<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'blue-500': '#02368A',
            }
          }
        }
      }
    </script>
    <title>Formulaire</title>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body class="flex items-center justify-center min-h-screen">
    <div
      class="w-[50rem] flex flex-col overflow-hidden items-start space-y-5 py-10 rounded-lg"
    >
      <button onclick="returnToHome()" class="flex items-center space-x-3">
        <svg
          width="20"
          height="20"
          class="svg"
          viewBox="0 0 1024 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill="#fff"
            d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"
          />
          <path
            fill="#fff"
            d="m237.248 512l265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"
          />
        </svg>
        <span class="text-xl" style="color: white;">Retour</span>
      </button>
      <form
      id="form-vehicule"
        method="get"
        action="./resultat.html"
        class="bg-white text-black w-full flex flex-col space-y-8 overflow-hidden h-full p-20 rounded-lg shadow-md "
      >
        <h2 class="font-semibold text-3xl">Dommages au véhicule</h2>
        <p>Veuillez remplir le formulaire ci-dessous.</p>
        <div class="flex flex-col space-y-9">
          <div id="champ" class="p-2 space-y-3 flex flex-col input-text">
            <label>
              <span class="block text-sm font-medium text-slate-700">
                Quelle est la valeur neuve de votre véhicule ?
              </span>
              <input
                type="number"
                name="valNew"
                class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 duration-300 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
              />
            </label>
            <!-- <button class="self-end bg-blue-500 px-3 py-2 rounded-lg text-white">Continuer</button> -->
          </div>
          <div id="champ" class="p-2 space-y-3 flex flex-col hidden input-text">
            <label class="block">
              <span class="block text-sm font-medium text-slate-700">
                Quelle est la valeur vénale (actuelle) de votre véhicule ?
              </span>
              <input
                type="number"
                name="valNew"
                class="mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 duration-300 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1"
              />
            </label>
            <!-- <button class="self-end bg-blue-500 px-3 py-2 rounded-lg text-white">Continuer</button> -->
          </div>
          <div id="champ" class="space-y-3 hidden input-radio">
            <h3>
              Voulez-vous prendre une couverture pour vol/vol à main armée ?
            </h3>
            <div class="space-x-5 flex">
              <div>
                <input
                  id="oui"
                  class="peer/oui hidden"
                  type="radio"
                  name="couvertureVol"
                />
                <label
                  for="oui"
                  class="peer-checked/oui:bg-blue-500 peer-checked/oui:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Oui</span>
                </label>
              </div>
              <div>
                <input
                  id="non"
                  class="peer/non hidden"
                  type="radio"
                  name="couvertureVol"
                />
                <label
                  for="non"
                  class="peer-checked/non:bg-blue-500 peer-checked/non:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Non</span>
                </label>
              </div>
            </div>
          </div>
          <div id="champ" class="space-y-3 hidden input-radio">
            <h3>Voulez-vous prendre une assurance incendie ?</h3>
            <div class="space-x-5 flex">
              <div>
                <input
                  id="ouiAsI"
                  class="peer/ouiAsI hidden"
                  type="radio"
                  name="assuranceIncendie"
                />
                <label
                  for="ouiAsI"
                  class="peer-checked/ouiAsI:bg-blue-500 peer-checked/ouiAsI:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Oui</span>
                </label>
              </div>
              <div>
                <input
                  id="nonAsI"
                  class="peer/nonAsI hidden"
                  type="radio"
                  name="assuranceIncendie"
                />
                <label
                  for="nonAsI"
                  class="peer-checked/nonAsI:bg-blue-500 peer-checked/nonAsI:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Non</span>
                </label>
              </div>
            </div>
          </div>
          <div id="champ" class="space-y-3 hidden input-radio">
            <h3>Voulez-vous prendre une assurance bris de glace ?</h3>
            <div class="space-x-5 flex">
              <div>
                <input
                  id="ouiAsB"
                  class="peer/ouiAsB hidden"
                  type="radio"
                  name="assuranceBrise"
                />
                <label
                  for="ouiAsB"
                  class="peer-checked/ouiAsB:bg-blue-500 peer-checked/ouiAsB:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Oui</span>
                </label>
              </div>
              <div>
                <input
                  id="nonAsB"
                  class="peer/nonAsB hidden"
                  type="radio"
                  name="assuranceBrise"
                />
                <label
                  for="nonAsB"
                  class="peer-checked/nonAsB:bg-blue-500 peer-checked/nonAsB:text-white shadow shadow-blue-200 duration-300 px-5 bg-blue-50 flex items-center p-4 rounded-lg"
                >
                  <span>Non</span>
                </label>
              </div>
            </div>
          </div>

          <button
            id="bouton-validation"
            type="button"
            onclick="validateChamps()"
            class="self-end bg-blue-500 px-3 py-2 rounded-lg text-white hidden"
          >
            Continuer
          </button>
        </div>

        <button
          type="submit"
          id="bouton-validation-final"
          class="self-end hidden bg-blue-500 p-4 rounded-lg text-white"
        >
          Voir les assurances disponible
        </button>
      </form>




  
    </div>

    <script>
      // Récupérer tous les champs de saisie de type texte
      const champsTexte = document.querySelectorAll("#champ");
      const boutonValidationFinal = document.getElementById(
          "bouton-validation-final"
      );
      let champIndex = 0;
      // Ajouter un événement "input" à chaque champ de texte pour surveiller les saisies
      champsTexte.forEach((champ, index) => {

          if (champ.classList.contains("input-text")) {
              champ.addEventListener("input", ()=> afficherBoutonValidation(index));
          } else {




              champ.addEventListener("input", () => validateChamps(index));



          }
      });

      function returnToHome() {
          history.back();
      }
      // Fonction pour afficher le bouton de validation lorsque l'un des champs de texte est rempli
      function afficherBoutonValidation(index) {
          if ( index === champIndex || index == undefined) {
          const boutonValidation = document.getElementById("bouton-validation");

          boutonValidation.classList.remove("hidden");
          boutonValidation.classList.add("block");

          }
      }

      function validateChamps(index) {

          console.log(index, champIndex)
          
          const boutonValidation = document.getElementById("bouton-validation");
          if ( index === champIndex || index == undefined) {

          boutonValidation.classList.add("hidden");
          boutonValidation.classList.remove("block");

        

              if (champIndex+1 == champsTexte.length) {
                  boutonValidationFinal.classList.remove("hidden");
                  // boutonValidationFinal.classList.add("block");
              } else {
                  champsTexte[champIndex + 1].classList.remove("hidden");
              }
              champIndex++;

          }


      }
  </script>
  </body>
</html>
